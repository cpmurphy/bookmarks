<% content_for :title, "Bookmarks" %>

<% if notice %>
  <div class="notice"><%= notice %></div>
<% end %>

<header class="page-header">
  <h1>Bookmarks</h1>
  <div class="actions">
    <% if authenticated? %>
      <%= button_to "New bookmark", new_bookmark_path, method: :get, class: "button primary" %>
      <%= button_to "Sign out", session_path, method: :delete, class: "button" %>
    <% else %>
      <%= button_to "Sign in", new_session_path, method: :get, class: "button" %>
    <% end %>
  </div>
</header>

<main class="bookmarks-container">
  <% @bookmarks.each do |bookmark| %>
    <article class="bookmark-card">
      <div class="bookmark-content">
        <h2 class="bookmark-title">
          <a href="<%= bookmark.url %>" target="_blank" rel="noopener">
            <%= bookmark.title %>
          </a>
        </h2>

        <% if bookmark.description.present? %>
          <p class="bookmark-description"><%= bookmark.description %></p>
        <% end %>

        <% if bookmark.tags.present? %>
          <div class="bookmark-tags">
            <% bookmark.tags.split(',').each do |tag| %>
              <span class="tag"><%= tag.strip %></span>
            <% end %>
          </div>
        <% end %>
      </div>

      <div class="bookmark-actions">
        <% if authenticated? %>
          <%= link_to "Edit", edit_bookmark_path(bookmark), class: "button" %>
        <% end %>
      </div>
    </article>
  <% end %>
</main>

<% if authenticated? %>
  <section class="import-section">
    <h2>Import Bookmarks</h2>
    <%= form_tag import_bookmarks_path, multipart: true, class: "import-form" do %>
    <div class="file-input-wrapper">
      <%= file_field_tag :file, class: "file-input", accept: "application/json" %>
        <%= submit_tag "Import JSON", class: "button" %>
      </div>
    <% end %>
  </section>
<% end %>
